var c=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},W=class{static fromArray(t,r){let n=r||new je;for(let i=t.length-1;i>=0;--i)n=new he(t[i],n);return n}[Symbol.iterator](){return new tt(this)}toArray(){return[...this]}atLeastLength(t){for(let r of this){if(t<=0)return!0;t--}return t<=0}hasLength(t){for(let r of this){if(t<=0)return!1;t--}return t===0}countLength(){let t=0;for(let r of this)t++;return t}};function _(e,t){return new he(e,t)}function a(e,t){return W.fromArray(e,t)}var tt=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof je)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},je=class extends W{},he=class extends W{constructor(t,r){super(),this.head=t,this.tail=r}};var $e=class e extends c{static isResult(t){return t instanceof e}},$=class extends $e{constructor(t){super(),this[0]=t}isOk(){return!0}},h=class extends $e{constructor(t){super(),this[0]=t}isOk(){return!1}};function g(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!Lt(n)||!Lt(i)||!Rr(n,i)||qr(n,i)||Nr(n,i)||zr(n,i)||Ir(n,i)||Pr(n,i)||Mr(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[u,l]=Sr(n);for(let p of u(n))r.push(l(n,p),l(i,p))}return!0}function Sr(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function qr(e,t){return e instanceof Date&&(e>t||e<t)}function Nr(e,t){return e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function zr(e,t){return Array.isArray(e)&&e.length!==t.length}function Ir(e,t){return e instanceof Map&&e.size!==t.size}function Pr(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function Mr(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function Lt(e){return typeof e=="object"&&e!==null}function Rr(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function se(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.fn=n;for(let u in s)o[u]=s[u];return o}var L=class extends c{constructor(t){super(),this[0]=t}},H=class extends c{};var St=new WeakMap,rt=new DataView(new ArrayBuffer(8)),nt=0;function it(e){let t=St.get(e);if(t!==void 0)return t;let r=nt++;return nt===2147483647&&(nt=0),St.set(e,r),r}function st(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function ut(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function qt(e){rt.setFloat64(0,e);let t=rt.getInt32(0),r=rt.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function Ur(e){return ut(e.toString())}function Wr(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return it(e);if(e instanceof Date)return qt(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+T(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+T(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+st(T(n),T(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+st(T(o),ut(s))|0}}return r}function T(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return qt(e);case"string":return ut(e);case"bigint":return Ur(e);case"object":return Wr(e);case"symbol":return it(e);case"function":return it(e);default:return 0}}var M=5,lt=Math.pow(2,M),Hr=lt-1,Gr=lt/2,Jr=lt/4,D=0,P=1,O=2,Z=3,at={type:O,bitmap:0,array:[]};function ge(e,t){return e>>>t&Hr}function Te(e,t){return 1<<ge(e,t)}function Vr(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function ct(e,t){return Vr(e&t-1)}function S(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function Yr(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function ot(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function Nt(e,t,r,n,i,s){let o=T(t);if(o===n)return{type:Z,hash:o,array:[{type:D,k:t,v:r},{type:D,k:i,v:s}]};let u={val:!1};return be(ft(at,e,o,t,r,u),e,n,i,s,u)}function be(e,t,r,n,i,s){switch(e.type){case P:return Kr(e,t,r,n,i,s);case O:return ft(e,t,r,n,i,s);case Z:return Xr(e,t,r,n,i,s)}}function Kr(e,t,r,n,i,s){let o=ge(r,t),u=e.array[o];if(u===void 0)return s.val=!0,{type:P,size:e.size+1,array:S(e.array,o,{type:D,k:n,v:i})};if(u.type===D)return g(n,u.k)?i===u.v?e:{type:P,size:e.size,array:S(e.array,o,{type:D,k:n,v:i})}:(s.val=!0,{type:P,size:e.size,array:S(e.array,o,Nt(t+M,u.k,u.v,r,n,i))});let l=be(u,t+M,r,n,i,s);return l===u?e:{type:P,size:e.size,array:S(e.array,o,l)}}function ft(e,t,r,n,i,s){let o=Te(r,t),u=ct(e.bitmap,o);if(e.bitmap&o){let l=e.array[u];if(l.type!==D){let f=be(l,t+M,r,n,i,s);return f===l?e:{type:O,bitmap:e.bitmap,array:S(e.array,u,f)}}let p=l.k;return g(n,p)?i===l.v?e:{type:O,bitmap:e.bitmap,array:S(e.array,u,{type:D,k:n,v:i})}:(s.val=!0,{type:O,bitmap:e.bitmap,array:S(e.array,u,Nt(t+M,p,l.v,r,n,i))})}else{let l=e.array.length;if(l>=Gr){let p=new Array(32),f=ge(r,t);p[f]=ft(at,t+M,r,n,i,s);let d=0,x=e.bitmap;for(let m=0;m<32;m++){if(x&1){let w=e.array[d++];p[m]=w}x=x>>>1}return{type:P,size:l+1,array:p}}else{let p=Yr(e.array,u,{type:D,k:n,v:i});return s.val=!0,{type:O,bitmap:e.bitmap|o,array:p}}}}function Xr(e,t,r,n,i,s){if(r===e.hash){let o=pt(e,n);if(o!==-1)return e.array[o].v===i?e:{type:Z,hash:r,array:S(e.array,o,{type:D,k:n,v:i})};let u=e.array.length;return s.val=!0,{type:Z,hash:r,array:S(e.array,u,{type:D,k:n,v:i})}}return be({type:O,bitmap:Te(e.hash,t),array:[e]},t,r,n,i,s)}function pt(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(g(t,e.array[n].k))return n;return-1}function Le(e,t,r,n){switch(e.type){case P:return Zr(e,t,r,n);case O:return Qr(e,t,r,n);case Z:return en(e,n)}}function Zr(e,t,r,n){let i=ge(r,t),s=e.array[i];if(s!==void 0){if(s.type!==D)return Le(s,t+M,r,n);if(g(n,s.k))return s}}function Qr(e,t,r,n){let i=Te(r,t);if(!(e.bitmap&i))return;let s=ct(e.bitmap,i),o=e.array[s];if(o.type!==D)return Le(o,t+M,r,n);if(g(n,o.k))return o}function en(e,t){let r=pt(e,t);if(!(r<0))return e.array[r]}function dt(e,t,r,n){switch(e.type){case P:return tn(e,t,r,n);case O:return rn(e,t,r,n);case Z:return nn(e,n)}}function tn(e,t,r,n){let i=ge(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===D){if(!g(s.k,n))return e}else if(o=dt(s,t+M,r,n),o===s)return e;if(o===void 0){if(e.size<=Jr){let u=e.array,l=new Array(e.size-1),p=0,f=0,d=0;for(;p<i;){let x=u[p];x!==void 0&&(l[f]=x,d|=1<<p,++f),++p}for(++p;p<u.length;){let x=u[p];x!==void 0&&(l[f]=x,d|=1<<p,++f),++p}return{type:O,bitmap:d,array:l}}return{type:P,size:e.size-1,array:S(e.array,i,o)}}return{type:P,size:e.size,array:S(e.array,i,o)}}function rn(e,t,r,n){let i=Te(r,t);if(!(e.bitmap&i))return e;let s=ct(e.bitmap,i),o=e.array[s];if(o.type!==D){let u=dt(o,t+M,r,n);return u===o?e:u!==void 0?{type:O,bitmap:e.bitmap,array:S(e.array,s,u)}:e.bitmap===i?void 0:{type:O,bitmap:e.bitmap^i,array:ot(e.array,s)}}return g(n,o.k)?e.bitmap===i?void 0:{type:O,bitmap:e.bitmap^i,array:ot(e.array,s)}:e}function nn(e,t){let r=pt(e,t);if(r<0)return e;if(e.array.length!==1)return{type:Z,hash:e.hash,array:ot(e.array,r)}}function zt(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===D){t(s.v,s.k);continue}zt(s,t)}}}var we=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=Le(this.root,0,T(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?at:this.root,s=be(i,0,T(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=dt(this.root,0,T(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:Le(this.root,0,T(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){zt(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+st(T(r),T(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;let r=!0;return this.forEach((n,i)=>{r=r&&g(t.get(i,!n),n)}),r}};function It(e){return e.toString()}function Pt(e){if(e==="")return 0;let t=Mt(e);if(t){let r=0;for(let n of t)r++;return r}else return e.match(/./gsu).length}function Se(e){let t=Mt(e);return t?W.fromArray(Array.from(t).map(r=>r.segment)):W.fromArray(e.match(/./gsu))}function Mt(e){if(globalThis.Intl&&Intl.Segmenter)return new Intl.Segmenter().segment(e)[Symbol.iterator]()}function xt(e){let t="";for(let r of e)t=t+r;return t}var Rt=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),Vi=new RegExp(`^([${Rt}]*)`,"g"),Yi=new RegExp(`([${Rt}]*)$`,"g");function Ut(){return we.new()}function qe(e){return W.fromArray(e.entries())}function Wt(e,t,r){return r.set(e,t)}function G(){return Ut()}function ye(e,t,r){return Wt(t,r,e)}function on(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=_(i,n)}}}function un(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return on(n,a([]));{let i=r.head;e=r.tail,t=_(i[0],n)}}}function ln(e){let t=qe(e);return un(t,a([]))}function mt(e){return ln(e)}function R(e){return It(e)}function _n(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=_(i,n)}}}function V(e){return _n(e,a([]))}function Yt(e,t){for(;;){let r=e,n=t;if(n<=0)return r;if(r.hasLength(0))return a([]);e=r.tail,t=n-1}}function hn(e,t,r){for(;;){let n=e,i=t,s=r;if(i<=0)return V(s);if(n.hasLength(0))return V(s);{let u=n.head;e=n.tail,t=i-1,r=_(u,s)}}}function Kt(e,t){return hn(e,t,a([]))}function ee(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function $n(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i.hasLength(0))return s;{let l=i.head;e=i.tail,t=o(s,l,u),r=o,n=u+1}}}function ze(e,t,r){return $n(e,t,r,0)}function _t(e){return xt(e)}function Ie(e){return e}function tr(e){return Pt(e)}function Dn(e){let r=_t(e);return Ie(r)}function er(e,t,r){let i=Se(e),s=Yt(i,t),o=Kt(s,r);return Dn(o)}function Cn(e,t,r){if(r<0)return"";if(t<0){let s=tr(e)+t;return s<0?"":er(e,s,r)}else return er(e,t,r)}function ht(e,t){return t<0?e:Cn(e,t,tr(e)-t)}function wt(e,t,r){return e?t:r()}var bt=class extends c{constructor(t){super(),this.all=t}};function ke(){return new bt(a([]))}var ce=class extends c{constructor(t){super(),this.content=t}},F=class extends c{constructor(t,r,n,i,s,o,u){super(),this.key=t,this.namespace=r,this.tag=n,this.attrs=i,this.children=s,this.self_closing=o,this.void=u}},Ae=class extends c{constructor(t){super(),this.subtree=t}};var fe=class extends c{constructor(t,r,n){super(),this[0]=t,this[1]=r,this.as_property=n}},De=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}};function In(e){if(e instanceof fe)return new h(void 0);{let t=e[0],r=e[1],n=ht(t,2);return new $([n,r])}}function ur(e,t,r){return ze(e,t,(n,i,s)=>{let o=r+"-"+R(s);return cr(i,n,o)})}function cr(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof ce)return i;if(n instanceof Ae){let o=n.subtree;e=o(),t=i,r=s}else if(n instanceof F){let o=n.attrs,u=n.children,l=ee(o,i,(p,f)=>{let d=In(f);if(d.isOk()){let x=d[0][0],m=d[0][1];return ye(p,s+"-"+x,m)}else return p});return ur(u,l,s)}else{let o=n.elements;return ur(o,i,s)}}}function fr(e){return cr(e,G(),"0")}function N(e,t){return new fe(e,t,!1)}function dr(e,t){return new De("on"+e,t)}function X(e){return N("style",ee(e,"",(t,r)=>{let n=r[0],i=r[1];return t+n+":"+i+";"}))}function A(e){return N("class",e)}function xr(e){return N("type",e)}function re(e,t,r){return e==="area"?new F("","",e,t,a([]),!1,!0):e==="base"?new F("","",e,t,a([]),!1,!0):e==="br"?new F("","",e,t,a([]),!1,!0):e==="col"?new F("","",e,t,a([]),!1,!0):e==="embed"?new F("","",e,t,a([]),!1,!0):e==="hr"?new F("","",e,t,a([]),!1,!0):e==="img"?new F("","",e,t,a([]),!1,!0):e==="input"?new F("","",e,t,a([]),!1,!0):e==="link"?new F("","",e,t,a([]),!1,!0):e==="meta"?new F("","",e,t,a([]),!1,!0):e==="param"?new F("","",e,t,a([]),!1,!0):e==="source"?new F("","",e,t,a([]),!1,!0):e==="track"?new F("","",e,t,a([]),!1,!0):e==="wbr"?new F("","",e,t,a([]),!1,!0):new F("","",e,t,r,!1,!1)}function Ce(e){return new ce(e)}var Et=class extends c{constructor(t){super(),this.dict=t}};function mr(){return new Et(G())}var Re=class extends c{constructor(t){super(),this[0]=t}},Ue=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},We=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}};function _r(e){return g(e.created,G())&&g(e.removed,mr())&&g(e.updated,G())}var He=class extends c{constructor(t){super(),this[0]=t}},Ge=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},ne=class extends c{constructor(t){super(),this[0]=t}},B=class extends c{constructor(t){super(),this[0]=t}},pe=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},Je=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}};var de=class extends c{},Ve=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},Ye=class extends c{constructor(t){super(),this[0]=t}},xe=class extends c{constructor(t){super(),this[0]=t}};function _e(e,t,r){let n,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:o,parent:u}=i.pop();if(o.subtree!==void 0&&(o=o.subtree()),o.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==o.content&&(s.textContent=o.content),n??=s;else{let l=document.createTextNode(o.content);u.replaceChild(l,s),n??=l}else{let l=document.createTextNode(o.content);u.appendChild(l),n??=l}else if(o.tag!==void 0){let l=Jn({prev:s,next:o,dispatch:r,stack:i});s?s!==l&&u.replaceChild(l,s):u.appendChild(l),n??=l}else o.elements!==void 0?me(o,l=>{i.unshift({prev:s,next:l,parent:u}),s=s?.nextSibling}):o.subtree!==void 0&&i.push({prev:s,next:o,parent:u})}return n}function Jn({prev:e,next:t,dispatch:r,stack:n}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),u;if(Be.has(o))u=Be.get(o);else{let y=new Map;Be.set(o,y),u=y}let l=s?new Set(u.keys()):null,p=s?new Set(Array.from(e.attributes,y=>y.name)):null,f=null,d=null,x=null;for(let y of t.attrs){let b=y[0],j=y[1];if(y.as_property)o[b]!==j&&(o[b]=j),s&&p.delete(b);else if(b.startsWith("on")){let U=b.slice(2),et=r(j,U==="input");u.has(U)||o.addEventListener(U,ve),u.set(U,et),s&&l.delete(U)}else if(b.startsWith("data-lustre-on-")){let U=b.slice(15),et=r(Vn);u.has(U)||o.addEventListener(U,ve),u.set(U,et),o.setAttribute(b,j)}else b==="class"?f=f===null?j:f+" "+j:b==="style"?d=d===null?j:d+j:b==="dangerous-unescaped-html"?x=j:(o.getAttribute(b)!==j&&o.setAttribute(b,j),(b==="value"||b==="selected")&&(o[b]=j),s&&p.delete(b))}if(f!==null&&(o.setAttribute("class",f),s&&p.delete("class")),d!==null&&(o.setAttribute("style",d),s&&p.delete("style")),s){for(let y of p)o.removeAttribute(y);for(let y of l)u.delete(y),o.removeEventListener(y,ve)}if(t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(x!==null)return o.innerHTML=x,o;let m=o.firstChild,w=null,k=null,I=null,J=t.children[Symbol.iterator]().next().value;s&&J!==void 0&&J.key!==void 0&&J.key!==""&&(w=new Set,k=hr(e),I=hr(t));for(let y of t.children)me(y,b=>{b.key!==void 0&&w!==null?m=Yn(m,b,o,n,I,k,w):(n.unshift({prev:m,next:b,parent:o}),m=m?.nextSibling)});for(;m;){let y=m.nextSibling;o.removeChild(m),m=y}return o}var Be=new WeakMap;function ve(e){let t=e.currentTarget;if(!Be.has(t)){t.removeEventListener(e.type,ve);return}let r=Be.get(t);if(!r.has(e.type)){t.removeEventListener(e.type,ve);return}r.get(e.type)(e)}function Vn(e){let t=e.currentTarget,r=t.getAttribute(`data-lustre-on-${e.type}`),n=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:r,data:i.reduce((s,o)=>{let u=o.split(".");for(let l=0,p=s,f=e;l<u.length;l++)l===u.length-1?p[u[l]]=f[u[l]]:(p[u[l]]??={},f=f[u[l]],p=p[u[l]]);return s},{data:n})}}function hr(e){let t=new Map;if(e)for(let r of e.children)me(r,n=>{let i=n?.key||n?.getAttribute?.("data-lustre-key");i&&t.set(i,n)});return t}function Yn(e,t,r,n,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let l=e.nextSibling;r.removeChild(e),e=l}if(s.size===0)return me(t,l=>{n.unshift({prev:e,next:l,parent:r}),e=e?.nextSibling}),e;if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),n.unshift({prev:null,next:t,parent:r}),e;o.add(t.key);let u=s.get(t.key);if(!u&&!e)return n.unshift({prev:null,next:t,parent:r}),e;if(!u&&e!==null){let l=document.createTextNode("");return r.insertBefore(l,e),n.unshift({prev:l,next:t,parent:r}),e}return!u||u===e?(n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e):(r.insertBefore(u,e),n.unshift({prev:u,next:t,parent:r}),e)}function me(e,t){if(e.elements!==void 0)for(let r of e.elements)me(r,t);else e.subtree!==void 0?me(e.subtree(),t):t(e)}var kt=class e{static start({init:t,update:r,view:n},i,s){if(!Ke())return new h(new ie);let o=i instanceof HTMLElement?i:document.querySelector(i);if(!o)return new h(new Oe(i));let u=new e(o,t(s),r,n);return new $(l=>u.send(l))}constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#s=i,this.#r=s,this.#t=window.requestAnimationFrame(()=>this.#i(n.all.toArray(),!0))}root;send(t){if(t instanceof ne){if(t[0]instanceof xe){this.#t=window.cancelAnimationFrame(this.#t),this.#n=[],this.#e=t[0][0];let r=this.#r(this.#e),n=(s,o=!1)=>u=>{let l=s(u);l instanceof $&&this.send(new B(l[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));_e(i,r,n)}}else if(t instanceof B){let r=t[0],n=t[1]??!1;this.#n.push(r),n?(this.#t=window.cancelAnimationFrame(this.#t),this.#i()):this.#t||(this.#t=window.requestAnimationFrame(()=>this.#i()))}else if(t instanceof pe){let r=t[0],n=t[1];this.root.dispatchEvent(new CustomEvent(r,{detail:n,bubbles:!0,composed:!0}))}else if(t instanceof de)for(this.#t=window.cancelAnimationFrame(this.#t),this.#e=null,this.#s=null,this.#r=null,this.#n=null;this.root.firstChild;)this.root.firstChild.remove()}#e;#s;#r;#n=[];#t;#i(t=[],r=!1){if(this.#t=void 0,!this.#o(t,r))return;let n=this.#r(this.#e),i=(o,u=!1)=>l=>{let p=o(l);p instanceof $&&this.send(new B(p[0],u))},s=this.root.firstChild??this.root.appendChild(document.createTextNode(""));_e(s,n,i)}#o(t=[],r=!1){for(;this.#n.length>0;){let n=this.#n.shift(),[i,s]=this.#s(this.#e,n);r||=this.#e!==i,t=t.concat(s.all.toArray()),this.#e=i}for(;t.length>0;)t.shift()(o=>this.send(new B(o)),(o,u)=>this.root.dispatchEvent(new CustomEvent(o,{detail:u,bubbles:!0,composed:!0})));return this.#n.length>0?this.#o(t,r):r}},wr=kt.start,Dt=({init:e,update:t,view:r,on_attribute_change:n},i)=>{if(!Ke())return new h(new ie);if(!i.includes("-"))return new h(new Xe(i));if(window.customElements.get(i))return new h(new Ze(i));let[s,o]=e(void 0),u=n instanceof L,l=class extends HTMLElement{static get observedAttributes(){return u?n[0].entries().map(([f])=>f):[]}constructor(){super(),this.attachShadow({mode:"open"}),u&&n[0].forEach((f,d)=>{Object.defineProperty(this,d,{get(){return this[`__mirrored__${d}`]},set(x){let m=this[`__mirrored__${d}`];if(this.#t&&g(m,x))return;this[`__mirrorred__${d}`]=x;let w=f(x);w instanceof h||(this.#r.push(w[0]),this.#t&&!this.#n&&(this.#n=window.requestAnimationFrame(()=>this.#i())))}})})}connectedCallback(){this.#u().finally(()=>{this.#i(o.all.toArray(),!0),this.#t=!0})}attributeChangedCallback(f,d,x){d!==x&&(this[f]=x)}disconnectedCallback(){this.#s=null,this.#r=[],this.#n=window.cancelAnimationFrame(this.#n),this.#t=!1}send(f){if(f instanceof ne){if(f[0]instanceof xe){this.#n=window.cancelAnimationFrame(this.#n),this.#r=[],this.#s=f[0][0];let d=r(this.#s),x=(w,k=!1)=>I=>{let J=w(I);J instanceof $&&this.send(new B(J[0],k))},m=$r(this.shadowRoot,this.#e.length)??this.shadowRoot.appendChild(document.createTextNode(""));_e(m,d,x)}}else if(f instanceof B){let d=f[0],x=f[1]??!1;this.#r.push(d),x?(this.#n=window.cancelAnimationFrame(this.#n),this.#i()):this.#n||(this.#n=window.requestAnimationFrame(()=>this.#i()))}else if(f instanceof pe){let d=f[0],x=f[1];this.dispatchEvent(new CustomEvent(d,{detail:x,bubbles:!0,composed:!0}))}}#e=[];#s=s;#r=[];#n;#t=!0;#i(f=[],d=!1){if(this.#n=void 0,!this.#t||!this.#o(d,f))return;let x=r(this.#s),m=(k,I=!1)=>J=>{let y=k(J);y instanceof $&&this.send(new B(y[0],I))},w=$r(this.shadowRoot,this.#e.length)??this.shadowRoot.appendChild(document.createTextNode(""));_e(w,x,m)}#o(f=!1,d=[]){for(;this.#r.length>0;){let x=this.#r.shift(),[m,w]=t(this.#s,x);f||=this.#s!==m,d=d.concat(w.all.toArray()),this.#s=m}for(;d.length>0;)d.shift()(k=>this.send(new B(k)),(k,I)=>this.dispatchEvent(new CustomEvent(k,{detail:I,bubbles:!0,composed:!0})));return this.#r.length>0?this.#o(f,d):f}async#u(){let f=[],d=Array.from(document.styleSheets);for(let m of document.querySelectorAll("link[rel=stylesheet]"))d.includes(m.sheet)||f.push(new Promise((w,k)=>{m.addEventListener("load",w),m.addEventListener("error",k)}));for(await Promise.allSettled(f);this.#e.length;)this.#e.shift().remove();this.shadowRoot.adoptedStyleSheets=this.getRootNode().adoptedStyleSheets;let x=[];for(let m of document.styleSheets){try{this.shadowRoot.adoptedStyleSheets.push(m)}catch{}try{let w=new CSSStyleSheet;for(let k of m.cssRules)w.insertRule(k.cssText,w.cssRules.length);this.shadowRoot.adoptedStyleSheets.push(w)}catch{let w=m.ownerNode.cloneNode();this.shadowRoot.prepend(w),this.#e.push(w),x.push(new Promise((k,I)=>{w.onload=k,w.onerror=I}))}}return Promise.allSettled(x)}};window.customElements.define(i,l);for(let p of document.querySelectorAll(i)){let f=new l;for(let d of p.attributes)f.setAttribute(d.name,d.value);p.replaceWith(f)}return new $(void 0)},At=class e{static start({init:t,update:r,view:n,on_attribute_change:i},s){let o=new e(t(s),r,n,i);return new $(u=>o.send(u))}constructor([t,r],n,i,s){this.#e=t,this.#s=n,this.#n=i,this.#t=i(t),this.#u=s,this.#i=new Map,this.#o=fr(this.#t),this.#l(r.all.toArray())}send(t){if(t instanceof He){for(let r of t[0]){let n=this.#u.get(r[0]);if(!n)continue;let i=n(r[1]);i instanceof h||this.#r.push(i)}this.#l()}else if(t instanceof Ge)this.#r=this.#r.concat(t[0].toArray()),this.#l(t[1].all.toArray());else if(!(t instanceof ne))if(t instanceof B)this.#r.push(t[0]),this.#l();else if(t instanceof pe){let r=new Ue(t[0],t[1]);for(let[n,i]of this.#i)i(r)}else if(t instanceof Je){let r=this.#o.get(t[0]);if(!r)return;let n=r(t[1]);if(n instanceof h)return;this.#r.push(n[0]),this.#l()}else if(t instanceof Ve){let r=mt(this.#u),n=new We(r,this.#t);this.#i=this.#i.set(t[0],t[1]),t[1](n)}else t instanceof Ye&&(this.#i=this.#i.delete(t[0]))}#e;#s;#r;#n;#t;#i;#o;#u;#l(t=[]){if(!this.#a(!1,t))return;let r=this.#n(this.#e),n=elements(this.#t,r);if(!_r(n)){let i=new Re(n);for(let[s,o]of this.#i)o(i)}this.#t=r,this.#o=n.handlers}#a(t=!1,r=[]){for(;this.#r.length>0;){let n=this.#r.shift(),[i,s]=this.#s(this.#e,n);t||=this.#e!==i,r=r.concat(s.all.toArray()),this.#e=i}for(;r.length>0;)r.shift()(o=>this.send(new B(o)),(o,u)=>this.root.dispatchEvent(new CustomEvent(o,{detail:u,bubbles:!0,composed:!0})));return this.#r.length>0?this.#a(t,r):t}},Kn=At.start,Ke=()=>globalThis.window&&window.document;var $r=(e,t)=>{let r=e.firstChild;for(;r&&t>0;)r=r.nextSibling;return r};var Ct=class extends c{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.on_attribute_change=i}};var Xe=class extends c{constructor(t){super(),this.name=t}},Ze=class extends c{constructor(t){super(),this.name=t}},Oe=class extends c{constructor(t){super(),this.selector=t}},ie=class extends c{};function gr(e,t,r){return new Ct(e,t,r,new H)}function br(e){return gr(i=>[void 0,ke()],(i,s)=>[void 0,ke()],i=>e)}function yr(e,t,r){return gr(s=>[e(s),ke()],(s,o)=>[t(s,o),ke()],r)}function Fr(e,t,r){return wt(!Ke(),new h(new ie),()=>wr(e,t,r))}function z(e,t){return re("div",e,t)}function kr(e,t){return re("p",e,t)}function Ar(e,t){return re("button",e,t)}function Zn(e,t){return dr(e,t)}function vt(e){return Zn("click",t=>new $(e))}function Cr(e,t){return Ar(_(A("lustre-ui-button"),_(xr("button"),e)),t)}function Br(e,t,r){return e(_(A("lustre-ui-stack"),t),r)}function vr(e,t){return Br(z,e,t)}var Ot=Cr;var jr=vr;var Qe=class extends c{},jt=class extends c{};function $i(e){return 0}function wi(e,t){return t instanceof Qe?e+1:e-1}function gi(e){let t=R(e);return jr(a([]),a([Ot(a([vt(new Qe)]),a([Ce("+")])),kr(a([X(a([["text-align","center"]]))]),a([Ce(t)])),Ot(a([vt(new jt)]),a([Ce("-")]))]))}function Lr(e){let t=yr($i,wi,gi);return Dt(t,e)}function Tr(){let e=Lr("my-counter");if(!e.isOk())throw se("assignment_no_match","app",8,"main","Assignment pattern did not match",{value:e});let t=br(re("my-counter",a([]),a([]))),r=Fr(t,"#app",void 0);if(!r.isOk())throw se("assignment_no_match","app",11,"main","Assignment pattern did not match",{value:r});return r}Tr();
